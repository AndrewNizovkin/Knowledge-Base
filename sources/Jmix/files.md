# Работа с файлами.

Чтобы разместить файл в базе данных, нужно использовать атрибуты сущностей типа байтового массива.

```java
@Column(name = "AVATAR")
private byte[] avatar;
```

Но такой способ годится для небольших файлов. 

В случае больших файлов (графических или видео), нужно использовать другой тип данных и хранилище файлов.

```java
@Column(name = "ATTACHEMENT", nullable = false)
private FileRef attachement;
```
Интерфейс файлового хранилища поддерживает различные реализации.

По умолчанию, в качестве хранилища файлов используется файловая система сервера.

Файлы хранятся в дирректории `${user.dir}/.jmix/work/filestorage

Возможно использование нескольких хранилищ. Следующий код устанавливает дополнительное файловое хранилище с именем "myfs" 

```java
@Bean
FileStorage myFileStorage() {
    return new LocalFileStorage("myfs", "/var/tmp/myfs");
}
```

При этом, если планируется использовать несколько файловых хранилищ, в свойствах приложения нужно указать имя хранилища по умолчанию.

```java
// Локальное хранилище
jmix.core.default-file-storage = fs

// Хранилище AWS
jmix.core.default-file-storage = f3
```

### Компоненты для отображения файлов

`image`

Компонент image предназначен для отображения любых изображений. Для этого компонент может быть привязан к контейнеру данных, в котором необходимо указать атрибут типа byte[] или FileRef. Кроме того, изображение можно передать путём указания URL или загрузить через InputStream.

`avatar`

Для изображения пользователя или логотипа организации можно использовать специальный компонент avatar. Помимо изображения в нём можно также отобразить инициалы либо первые буквы имени на цветном фоне. Если не передано ничего – компонент отображает стандартную иконку-портретик.

`iframe`

Для отображения PDF файлов и встраивания веб-страниц на экраны приложения Jmix можно использовать HTML компонент iframe. Как и некоторые другие компоненты HTML, iframe можно добавлять в дескриптор экрана и работать с ним точно так же, как с визуальными компонентами из библиотеки Jmix – инструменты Studio позволяют определить для них наиболее типичные атрибуты.

### Компоненты для загрузки файлов

- `fileUploadField` загружает файл в базу данных приложения

- `fileStorageUploadField` С помощью этого компонента пользователи могут загружать файлы в хранилище файлов. При этом загруженный файл будет связан с атрибутом сущности типа `FileRef`.