# Python

[Как из .py сделать .exe](https://vk.com/@we_use_python-prevraschaem-kod-na-python-v-ispolnyaemyi-exe-fail)

[Управление цветом консоли](https://habr.com/ru/sandbox/158854/)

pass - заглушка, заполнитель

len() - функция, возвращающая длину

del() - удаляет

num.isdigit() - проверяет, является ли num числом

print(str * n) - повторяет str n раз

‘c’.join(structure) - объединяет structure, используя ‘c’ как разделитель

sorted(structure) - сортирует structure. Может иметь необязательные параметры:

- sorted(structure, reverse = True) - сортировка в обратном порядке

- sorted(structure, key = funcname) - сортировка с помощью специальной функции funcname, она может быть как стандартной функцией Python, так и специально написанной вами для данной задачи функцией и лямбдой.
    
    my_files_sorted = sorted(my_files, key=len) - сортировка по длине элемента
    
    population_sorted = sorted(population.items(), key=**lambda** x: x[1]) - сортировка словаря по значению
    

reversed(sequences) - возвращает генератор обратной последовательности. Чтобы получить список, нужно обернуть в list. Аналогична срезу [::-1], но срез возвращает список.

f1, f2 = f2, f1 +f2 - множественное присваивание

## Списки

list = [] - список. Можно изменять.

- list.append(x) - Добавляет элемент x в конец списка

- list.extend(L) - Добавляет все элементы списка L в конец списка

- list.insert(i, x) - Вставляет x в позицию перед индексом i в списке

- list.remove(x) - Удаляет первый элемент x из списка

- lilst.pop(i) - Удаляет и возвращает элемент с индексом i и возвращает 
его. Если элемент не указан удаляется последний элемент списка

- list.index(x) - Возвращает индекс первого элемента x в списке

- list.count(x) - Возвращает количество вхождений элемента x  в список

- list.sort() - Сортирует элементы по возрастанию

- list.reverse - Обращает порядок следования элементов

- list.clear() - Удаляет все элементы из списка

**Объединение списков a = list(), b = list():** 

- c = a + b - содержит элементы списков a, b

- c = [*a +*b] - то же, работает на версиях 3.5 и выше

- c = a + [b] - содержит элементы списка a и список b как элемент

## Кортежи

tuple = () - кортеж. Нельзя изменять. Для объявления кортежа с одним элементом нужно использовать конечную запятую. my_tuple = (’a’,)

- tuple.index(x) - Возвращает индекс первого элемента x в

- tuple.count(x) - Возвращает количество вхождений элемента x  в список

Объединение строк и кортежей в Python возможно с помощью оператора +

## Строки

Представляют собой последовательность символов, к которым можно обращаться как к элементам списка.

Для записи строки, в которой не будет проводится никакой обработки, нужно перед строкой добавить символ r или R. Например: r”Перевод строки обозначается \n”. Это полезно, например, при работе с регулярными выражениями, чтобы не возиться множеством обратных косых чёрточек.

## Множества

set = {} - множество. Нельзя изменять. Значения уникальны.

- set.add(x) - Добавляет элемент x в множество

- set.update(x, y, z) - Добавляет несколько элементов в множество

- set.copy() - Возвращает копию множества

- set.pop() - Удаляет один элемент из множества случайным образом

- set.discard(i) - Удаляет из множества элемент с порядковым номером i

- set1.intersection(set2) - Возвращает элементы, принадлежащие обоим множествам

- set1.difference(set2) - Возвращает элементы из множества set1, которых нет в set2

- set_a.**isdisjoint**(set_b) — истина, если set_a и set_b не имеют общих элементов.

- set_b.**issubset**(set_a) — если все элементы множества set_b принадлежат множеству set_a, то множество set_b целиком входит в множество set_a и является его подмножеством (set_b — подмножество)

- set_a.**issuperset**(set_b) — соответственно, если условие выше справедливо, то set_a — надмножество

## Словари

dict = {’key’: ‘value’, …} - словарь

- dict.keys() - возвращает список ключей словаря

| == union()

& == intersection()

^ == difference()

< <= > >= == отношения

d[key]=value

d[key]== value

d.keys()

d.values()

d.items()

d.clear()

del d[key]

d.update(new_d)

d.pop(key[,default])== value

d.popitem()== (key,value)

d.get(key[,default])== value

- sorted(my_dict) — когда мы передаем в функцию сортировки словарь без вызова его дополнительных методов — идёт перебор только ключей, сортированный список ключей нам и возвращается;

- sorted(my_dict.**keys**()) — тот же результат, что в предыдущем примере, но прописанный более явно;

- sorted(my_dict.**items**()) — возвращается сортированный список кортежей (ключ, значение), сортированных по ключу;

- sorted(my_dict.**values**()) — возвращается сортированный список значений

**Объединение словарей a = dict(), b = dict():**

c = {**a + **b}

slice(None, None, None) - эквивалент среза [::]

enumerate(itetable, n) - возвращает кортеж из порядкового номера и значения элемента, где n - может быть 0 или другое число, с которого начнётся перебор **всех** элементов коллекции. 

itertools - (import itertools) - пакет, расширяющий возможности работы с коллекциями.

itertools.islice((выражение-генератор), n) - ограничивает выборку n первыми элементами

itertools.chain(l1, l2) - возвращает объединённый список

l1 = [1,2,3]
l2 = [10,20,30]
result = [l*2 **for** l **in** itertools.chain(l1, l2)]
print(result)   # [2, 4, 6, 20, 40, 60]

## Функции

def my_function(arg1, arg2, arg3 = ‘default’) - объявление функции. arg3 - аргумент со значением по умолчанию.

Чтобы определить функцию с переменным количеством, нужно использовать звёздочки:

def function(*args, **keys) - аргументы с одной звёздочкой будут собраны в кортеж args, а с двумя  - в словарь keys

Оператор * позволяет распаковывать объекты, внутри которых находятся некоторые элементы

return - возвращает значение из функции

result = lambda x: x ** 3 - анонимная функция. result(2) вернёт 8

callbacks = [lambda x: x ** 2, lambda x: x ** 3, lambda x: x ** 4] - список анонимных функций

yield - ключевое слово, определяющее объект-генератор. Возвращает элемент. Похож на return, но в отличие от него приостанавливает выполнение, а не останавливает. Выполнение возобновляется, когда вызывающая сторона попросит новый элемент посредством next(). Продолжается, пока не произойдёт:

- Встретится новый yield

- Встретится return

- Выполнится последняя строчка тела функции

exec() - функция предназначенная для выполнения команд, содержащихся в строке или файле: exec(’print(”Hello World”)’)

eval() - функция, возвращающая результат выражения в строке: eval(’2 * 3’) 

[Генераторы коллекций и выражения-генераторы](https://habr.com/ru/post/320288/)

## Функции высшего порядка

Функции принадлежат к классу функций, поэтому можно создать переменную-ссылку на функцию

При передаче функции как параметра другой функции указывается только её название

lamba x: x+ 2

map(funk, iter) - возвращает итератор, каждый элемент которого есть результат работы funk к каждому элементу  iter

filter(func, iter) - возвращает итератор, каждый элемент которого соответствует элемент iter при значении true функции  func

reduce(lambda a, x: a + x, iter) - возвращает аккумулятор a после прохода по пунктам x списка

Пример простого reduce. Возвращает сумму всех пунктов в наборе:

```python
sum = reduce(lambda a, x: a + x, [0, 1, 2, 3, 4])

print sum
# => 10
```

zip(list_1, list_2, …..) - возвращает список кортежей из элементов - аргументов. Объединение происходит по минимальному размеру

enumerate(list, start) - возвращает кортеж из индекса и элемента list ,  start- начальный индекс. Пробегает по всему list

## Замыкания

```python
# Замыкания

def counter():
    count  = 0
    def inner():
        nonlocal count
        count += 1
        return count
    return inner
my_counter = counter()
for i in range(10):
    print(my_counter())
```

## Функции-декораторы

Декоратор - это функция, которая позволяет обернуть другую функцию для расширения её функциональности без непосредственного изменения её кода.

Декоратор принимает функцию в качестве аргумента и возвращает функцию.

`*args` — это сокращение от «arguments» (аргументы), а 

`**kwargs` — сокращение от «keyword arguments» (именованные аргументы).

## Файлы

Режимы:

- a - позволяет дописывать что-то в имеющийся файл. Если файл не существует, он будет создан.
- w - позволяет записывать данные и создавать файл, если он не существует. Перезаписывает файл.
- r - позволяет читать данные из файла. Если файл не существует, программа выдаст ошибку.
- w+ - позволяет открывать файл для записи и читать из него. Если файл не существует, он будет создан.
- r+ - позволяет открывать файл для чтения и дописывать в него. Если файл не существует, программа выдаст ошибку.

```python
data = open(’file.txt’, ‘a’)
data.writelines('something')
data.close() # Закрывать обязательно

with open(’file.txt’, ‘a’) as data:
    data.write('line1 \n') # закроется автоматически

```

## Модуль OS

import os - модуль os  предоставляет функции для работы с операционной системой. Например:

- os.chdir(path) - смена текущей директории. path - строка, полный путь к директории
- os.getcwd() - возвращает текущую директорию

## Модуль shutil

import shutil - этот модуль содержит набор функций высокого уровня для обработки файлов, групп файлов.

- shutil.copyfile(src, dst) - копирует содержимое (но не метаданные) файла src в файл dst
- shutil.copy(src, dst) - копирует содержимое файла src в файл или папку dst
- shutil.rmtree(path) -

## tkinter

Это библиотека Python для разработки графического интерфейса

from tkinter import * 

root = Tk() - главное окно-контейнер

root.geometry(”200x300+200+300”) - задаёт ширину, высоту и координаты верхнего левого угла (X, Y)

root.iconbitmap(default="mobile_phone.ico") - иконка для окна

icon = PhotoImage(file = "icon2.png")
root.iconphoto(False, icon) - ещё один вариант. Первый параметр указывает нужно ли применять иконку для всех окон приложения

root.attributes("-fullscreen", True) - полноэкранный режим

root.attributes("-alpha", 0.5) - прозрачность окна (0.5)

## Аналитика

EDA (Exploratory Data Analysis) - Разведочный анализ данных. Состоит в анализе основных свойств данных, нахождения в них общих закономерностей, распределений и аномалий, построение начальных моделей, зачастую с использованием инструментов визуализации.

Цели такого анализа:

- Максимальное “проникновение” в данные
- Выявление основных структур
- Выбор наиболее важных переменных
- Обнаружение отклонений и аномалий
- Проверка основных гипотез

## Pandas

Для работы с табличными статистическими данными удобно использовать  сервис Google Colab или установить Jupyter и импортировать библиотеку pandas

Библиотека pandas может читать многие форматы, включая: .csv, xslx, xls, txt, sql, …

import pandas as pd

 df=pd.read_csv('sample_data/california_housing_train.csv') - читает файл .csv в переменную df

df.head() - читает первые строки таблицы. По умолчанию 5 (df.head(n=5))

df.tail() - читает и показывает последние 5 (по умолчанию) строк таблицы

df.shape - возвращает кортеж из 2 значений (кол-во строк, кол-во) столбцов.

df.isnull() - приводит таблицу к виду True-False, где True - это пустая ячейка, а False - заполненная

df.isnull().sum() - выведет количество null-значений в каждой ячейке по столбцам

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/04200677-34d0-4559-acb7-f944c56d3c93/Untitled.png)

df.dtypes - выведет таблицу с типами данных для каждого столбца

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/dbf4ff33-461f-4a95-8666-61ba83f55123/Untitled.png)

df.columns - возвращает список с названиями всех столбцов

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/467c58e1-7675-4873-b12a-df8d99408a7c/Untitled.png)

df[’longitude’] - выводит один столбец

df[’longitude’, ‘latitude’] - выводит два столбца

df[df['housing_median_age'] < 20] - вывод по условию всей таблицы

df[(df['housing_median_age'] > 20) & (df['total_rooms'] > 2000)] - несколько условий

df[df['housing_median_age'] < 20, ['total_bedrooms', 'total_rooms']] - вывод двух (нескольких) столбцов по условию

print(df['population'].max()) - максимальное значение в столбце

print(df['population'].min()) - минимальное

print(df['population'].mean()) - среднее

print(df['population'].sum()) - сумма

df[['population', 'total_rooms']].median() - медианное значение для нескольких столбцов

Перцентиль - это показатель, используемый в статистике, показывающий значение, ниже которого падает определенный процент наблюдений в группе наблюдений

df.describe() - выводит общую картину показателей

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f0ae482d-3cd1-46d8-96e6-dea653549397/Untitled.png)

count - общее кол-во непустых строк

mean - среднее значение в столбце

std - стандартное отклонение от среднего значения

min - минимальное значение

max - максимальное значение

25%, 50% - перцентили

## Изображение статистических отношений

## **Scatterplot (точечный график)**

Математическая диаграмма, изображающая значения двух переменных в виде точек на декартовой плоскости.

Библиотека seaborn без труда принимает pandas DataFrame(таблицу).

import seaborn as sns

sns.scatterplot(data=df, x=”longitude”, y=”latitude”) - изображение точек долготы по отношению к широте

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e28acae9-7497-4895-9b25-97e1e9cbb8d8/Untitled.png)

Помимо двумерных отношений, можно добавить “дополнительное измерение” с помощью цвета.

sns.scatterplot(data=df, x="households", y="population", hue="total_rooms")

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8a139bb7-8d58-4f74-86e2-27e06269e4cb/Untitled.png)

sns.scatterplot(data=df, x="latitude", y="longitude", hue="median_house_value")

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1322e7f2-3aed-4af3-b9a5-8361934b2560/Untitled.png)

## Линейные графики

Для генерации линейных графиков в seaborn используется relplot функция, она также принимает DataFrame

Для визуализации выбирается тип line

sns.relplot(x="latitude", y="median_house_value", kind="line", data=df)

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/64fd8998-cbd1-449f-bd36-73c8c2afdaa8/Untitled.png)

## Гистограмма

Способ представления табличных данных в виде столбчатой диаграммы. По оси X обычно указывают значение. а по оси Y - встречаемость(кол-во таких значений в выборке)

sns.histplot(data=df, x="median_income")

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/bc0dcd2f-c8cc-431b-b9d9-93f1ab331e60/Untitled.png)

Медианный доход у пожилых жителей.

sns.histplot(data=df[df['housing_median_age']>50], x="median_income")

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/49ed8d95-f513-4e81-b561-ea0d709e8d81/Untitled.png)

df.loc[df['housing_median_age'] <= 20, 'age_group'] = 'Молодые’ - создаёт в дата фрейме новый столбец ‘age_group’

df.groupby('age_group') ['median_income'].mean().plot(kind='bar') - группирует и получает среднее значение

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8b4de230-3ab5-47cb-be5e-8460c1a208a0/Untitled.png)

zdsascas